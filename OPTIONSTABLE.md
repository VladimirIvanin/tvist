# Автоматическая таблица настроек слайдера

## Что было сделано

Создана система автоматической генерации таблицы настроек слайдера с описанием и дефолтными значениями.

## Структура

### 1. Улучшенные TypeScript типы (`src/core/types.ts`)

Добавлены JSDoc комментарии к каждой опции с:
- Детальным описанием
- Тегом `@default` с дефолтным значением
- Описанием для вложенных свойств объектов

Пример:
```typescript
/**
 * Количество слайдов на странице
 * @default 1
 */
perPage?: number
```

### 2. Метаданные опций (`docs/.vitepress/options-meta.json`)

JSON файл с структурированными данными обо всех опциях:
- `name` - название опции
- `type` - тип данных
- `default` - значение по умолчанию
- `description` - описание
- `nested` - вложенные свойства (для объектов)

### 3. Vue компонент таблицы (`docs/.vitepress/theme/OptionsTable.vue`)

Интерактивный компонент с функциями:
- ✅ Поиск по названию, типу, описанию
- ✅ Раскрытие/скрытие вложенных свойств
- ✅ Автоматическое раскрытие при поиске
- ✅ Адаптивный дизайн
- ✅ Стилизация в стиле VitePress

### 4. Страницы документации

#### `/docs/api/index.md`
Полная API документация с:
- Таблицей опций
- Методами
- Свойствами
- Событиями

#### `/docs/api/options.md`
Детальный справочник опций с:
- Таблицей всех опций
- Группировкой по категориям
- Примерами использования
- Приоритетом опций

### 5. Скрипт автогенерации (`scripts/generate-options-meta.ts`)

TypeScript скрипт для автоматической генерации JSON из types.ts.

**Примечание:** Скрипт находится в разработке и может некорректно парсить сложные вложенные типы. Для продакшена рекомендуется ручное редактирование JSON файла.

## Использование

### В Markdown

Просто добавьте компонент в любой `.md` файл:

```markdown
# Опции

<OptionsTable />
```

### Обновление данных

#### Ручное редактирование (рекомендуется)

1. Откройте `docs/.vitepress/options-meta.json`
2. Добавьте/отредактируйте опцию
3. Сохраните файл

#### Автоматическая генерация (экспериментально)

```bash
npm run docs:generate-meta
```

### Локальная разработка

```bash
npm run docs:dev
# Откройте http://localhost:5173/tvist/api/options
```

### Продакшн сборка

```bash
npm run docs:build
npm run docs:preview
```

## Структура JSON

```json
{
  "options": [
    {
      "name": "perPage",
      "type": "number",
      "default": "1",
      "description": "Количество слайдов на странице"
    },
    {
      "name": "arrows",
      "type": "boolean | object",
      "default": "false",
      "description": "Навигационные стрелки",
      "nested": [
        {
          "name": "prev",
          "type": "string | HTMLElement",
          "description": "Селектор для кнопки назад"
        }
      ]
    }
  ]
}
```

## Функционал таблицы

### Поиск
Поле поиска фильтрует опции по:
- Названию опции
- Типу данных
- Описанию
- Вложенным свойствам

### Раскрытие вложенных
Опции с вложенными свойствами имеют кнопку с иконкой стрелки:
- Клик раскрывает/скрывает вложенные свойства
- При поиске автоматически раскрываются если найдено совпадение

### Адаптивность
На мобильных устройствах скрываются колонки "Тип" и "По умолчанию" для экономии места.

## Обновление конфигурации VitePress

В `docs/.vitepress/config.ts` добавлен новый раздел:

```typescript
{
  text: 'API',
  items: [
    { text: 'Обзор API', link: '/api/' },
    { text: 'Опции', link: '/api/options' }
  ]
}
```

## Файлы проекта

```
docs/
├── .vitepress/
│   ├── config.ts              # Конфигурация (обновлена)
│   ├── options-meta.json      # Метаданные опций
│   └── theme/
│       ├── index.ts           # Регистрация компонента
│       └── OptionsTable.vue   # Компонент таблицы
├── api/
│   ├── index.md              # API документация
│   ├── options.md            # Справочник опций
│   └── README.md             # Инструкции по обновлению
scripts/
└── generate-options-meta.ts  # Скрипт автогенерации
src/
└── core/
    └── types.ts              # Типы с JSDoc (обновлены)
```

## Преимущества

1. **Единый источник правды** - типы TypeScript содержат актуальную информацию
2. **Автоматическая синхронизация** - изменения в типах можно быстро отразить в документации
3. **Удобный поиск** - пользователи могут быстро найти нужную опцию
4. **Интерактивность** - раскрытие вложенных свойств для детального изучения
5. **Адаптивность** - работает на любых устройствах

## Дальнейшее развитие

- [ ] Улучшить парсер TypeScript типов для корректной обработки сложных union types
- [ ] Добавить валидацию JSON схемы
- [ ] Добавить фильтрацию по категориям
- [ ] Добавить ссылки на примеры использования
- [ ] Добавить экспорт таблицы в разные форматы
- [ ] Автоматическое создание примеров кода для каждой опции

## Поддержка

Документация: `docs/api/README.md`
Dev сервер: `npm run docs:dev`
URL: http://localhost:5173/tvist/api/options
